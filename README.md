# phonify

Вот пример `README.md`, который ты можешь использовать для своего проекта:

---

# Phonify — Реферальная система с авторизацией по номеру телефона

## Описание проекта

В рамках данного проекта реализована реферальная система с авторизацией по номеру телефона. Система позволяет пользователям регистрироваться, авторизовываться, использовать и распространять инвайт-коды. Проект включает API для взаимодействия, интерфейс для базового тестирования функционала и контейнеризацию для удобства развертывания.

## Цель проекта

Цель проекта — предоставить простой и надежный механизм авторизации и реферальной системы, который можно легко тестировать и интегрировать в другие системы.

---

## Структура проекта

```
Phonify/
│
├── users/                  # Приложение пользователей
│   ├── migrations/         # Миграции для базы данных
│   ├── templates/          # Шаблоны
│   ├── models.py           # Модели базы данных
│   ├── views.py            # Представления
│   ├── serializers.py      # Сериализаторы DRF
│   ├── urls.py             # Маршруты API
│   ├── tests.py            # Тесты
│   ├── forms.py            # Формы для обработки данных
│
├── config/                 # Основная конфигурация проекта
│   ├── settings.py         # Настройки проекта
│   ├── urls.py             # Главные маршруты проекта
│
├── Dockerfile              # Docker файл для контейнеризации
├── docker-compose.yml      # Docker Compose файл для развертывания
├── requirements.txt        # Зависимости проекта
├── README.md               # Документация проекта
└── manage.py               # Точка входа для Django
```

---

## Технические требования

- **Язык программирования**: Python 3.x
- **Фреймворк**: Django, Django REST Framework
- **База данных**: PostgreSQL
- **Контейнеризация**: Docker
- **Документация**: ReDoc для автодокументации API
- **Тестирование**: Покрытие тестами — минимум 75%

---

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/your_username/phonify.git
    cd phonify
    ```

2. Создайте и активируйте виртуальное окружение:

    ```bash
    python3 -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    venv\Scripts\activate     # Для Windows
    ```

3. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

4. Настройте переменные окружения (если необходимо):

    ```bash
    cp .env.example .env
    ```

5. Запустите проект в Docker:

    ```bash
    docker-compose up --build
    ```

6. Примените миграции:

    ```bash
    docker-compose exec web python manage.py migrate
    ```

7. Проект будет доступен по адресу `http://localhost:8000`.

---

## API

### 1. Авторизация по номеру телефона

**POST /auth/phone/**

**Описание**: Запрос на авторизацию пользователя по номеру телефона. В ответ система имитирует отправку 4-значного кода авторизации.

**Пример запроса**:
```json
{
  "phone_number": "1234567890"
}
```

**Пример ответа**:
```json
{
  "message": "SMS код отправлен"
}
```

---

### 2. Ввод кода для авторизации

**POST /auth/verify/**

**Описание**: Проверка введенного кода для завершения процесса авторизации.

**Пример запроса**:
```json
{
  "phone_number": "1234567890",
  "code": "1234"
}
```

**Пример ответа**:
```json
{
  "message": "Авторизация успешна"
}
```

---

### 3. Получение профиля пользователя

**GET /profile/**

**Описание**: Получение информации о пользователе, включая активный инвайт-код и список пользователей, использовавших его инвайт-код.

**Пример ответа**:
```json
{
  "user": {
    "phone_number": "1234567890",
    "invite_code": "ABC123",
    "activated_invite_code": "XYZ789"
  },
  "users_using_invite_code": [
    "0987654321"
  ]
}
```

---

### 4. Ввод инвайт-кода

**POST /profile/invite/**

**Описание**: Ввод инвайт-кода. Система проверяет его на существование в базе данных и активирует его для текущего пользователя.

**Пример запроса**:
```json
{
  "invite_code": "XYZ789"
}
```

**Пример ответа**:
```json
{
  "message": "Инвайт-код принят"
}
```

---

## Документация API

Документация API доступна через [ReDoc](http://localhost:8000/redoc/).

---

## Тестирование

1. Для запуска тестов:

    ```bash
    pytest
    ```

2. Для получения отчета по покрытию:

    ```bash
    pytest --cov=users --cov-report=html
    ```

Отчет будет доступен в папке `htmlcov` в корне проекта.
---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name                                           Stmts   Miss  Cover
------------------------------------------------------------------
config/__init__.py                                 0      0   100%
config/settings.py                                30      1    97%
config/urls.py                                     7      0   100%
users/__init__.py                                  0      0   100%
users/admin.py                                     0      0   100%
users/apps.py                                      4      0   100%
users/forms.py                                    14      4    71%
users/migrations/0001_initial.py                  10      0   100%
users/migrations/0002_alter_user_username.py       4      0   100%
users/migrations/__init__.py                       0      0   100%
users/models.py                                   33      7    79%
users/tests.py                                    59      0   100%
users/urls.py                                      3      0   100%
users/views.py                                    57     17    70%
utils/__init__.py                                  0      0   100%
utils/sms.py                                      15      8    47%
------------------------------------------------------------------
TOTAL                                            236     37    84%    
---

## Контейнеризация с Docker

Для удобства развертывания проект использует Docker. Для запуска проекта в Docker используйте команду:

```bash
docker-compose up --build
```

---

## Лицензия

Этот проект лицензирован на условиях лицензии MIT.

--- 

Этот файл README.md описывает основные моменты, как работать с проектом и как взаимодействовать с API.
